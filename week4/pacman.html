<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Our Pacman Demo</title>
		<link rel="stylesheet" href="pacman.css" >
		<script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
		<script type="text/javascript">
	$(document).ready(function(){

		var world = [
			[2,2,2,2,2,2,2,2,2,2,2,2],
			[2,0,1,2,1,1,1,1,1,1,1,2],
			[2,2,1,2,1,2,1,2,1,1,1,2],
			[2,1,1,2,1,1,1,2,4,2,1,2],
			[2,1,2,2,2,2,1,1,2,1,1,2],
			[2,1,1,1,1,4,1,1,1,1,1,2],
			[2,1,1,1,2,1,2,1,1,4,1,2],
			[2,1,1,1,1,1,1,1,2,1,1,2],
			[2,1,1,1,1,1,2,1,4,2,1,2],
			[2,1,2,1,4,1,2,4,1,1,1,2],
			[2,1,1,1,2,1,2,1,1,1,1,2],
			[2,2,2,2,2,2,2,2,2,2,2,2]
		];

		var score = 0;
		var gameActive = true;


		var pacman = {
			x: 1,
			y: 1
		};

		function displayWorld(){
			var output = "";
			for (var i = 0; i < world.length; i++) {
				output += '<div class="row">\n'
				for (var j = 0; j < world[i].length; j++) {
					if(world[i][j] == 2 ) {
						output += "\t<div class='brick'></div>\n";
					} else if(world[i][j] == 1 ) {
						output += "\t<div class='coin'></div>\n";
					} else if(world[i][j] == 0 ) {
						output += "\t<div class='empty'></div>\n";
					} else if(world[i][j] == 4 ) {
					output += "\t<div class='empty'></div>\n";
					}
				}
				output += "</div>\n"
			}
			// console.log(output)
			$('#gameboard').html(output);
		}

		document.onkeydown = function(e){
			console.log(e.keyCode)
			if(e.keyCode == 37) {
				if (world[pacman.y][pacman.x-1] !== 2){
					pacman.x --;
				}
				$("#pacman").css('transform', 'rotate(180deg)')
			}
			else if(e.keyCode == 38) {
				if (world[pacman.y-1][pacman.x] !== 2){
					pacman.y --;
				}
				$("#pacman").css('transform', 'rotate(270deg)')
			}
			else if(e.keyCode == 39) {
				if (world[pacman.y][pacman.x+1] !== 2){
					pacman.x ++;
				}
				$("#pacman").css('transform', 'rotate(0deg)')
			}
			else if(e.keyCode == 40) {
				if (world[pacman.y+1][pacman.x] !== 2){
					pacman.y ++;
				}
				$("#pacman").css('transform', 'rotate(90deg)')
			}
			if (world[pacman.y][pacman.x] === 1) {
				world[pacman.y][pacman.x] = 0;
				score += 100;
			}
			displayPacman();
			displayWorld();
			displayScore();
		}

		function displayPacman(){
			document.getElementById('pacman').style.top = pacman.y*26+11+"px";
			document.getElementById('pacman').style.left = pacman.x*26+11+"px";
		}

		function displayScore(){
			$('#score').text(score);
		}

		//check game over
		//implement game over
		//implement ghost
		//high score
		//multiplayer

		displayWorld();
		displayPacman();
		displayScore();

	}); //end of document.ready
		</script>
	</head>
	<body>
		<div id="pacman"></div>
		<div id="gameboard"></div>
		<div id="score"></div>
	</body>
</html>
